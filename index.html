 <!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta http-equiv="Cache-Control" content="no-store"/>
<title>Sacado Acad√©mie ‚Äî Automatismes</title>

<!-- React + ReactDOM -->
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<!-- Babel -->
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<style>
  :root{ --brand:#8374a7; }
  body{ margin:0; background:#f8fafc; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
  .hero{ background:#efe7ff; }
  .card{ background:#fff; border:1px solid #e5e7eb; }
  .btn{ background:var(--brand); color:#fff; }
  .pill{ padding:.45rem .8rem; border:1px solid #e5e7eb; border-radius:999px; background:#fff; cursor:pointer; color:#111827; }
  .pill.active{ background:var(--brand); border-color:var(--brand); color:#fff; }
  .hdr{ background:#f1f5f9; }
  .ok{ background:#dcfce7; } .ko{ background:#fee2e2; }
  .ko-input{ color:#be185d !important; font-weight:700; }

  /* Diagonale (fond + texte violets) */
  .diag-bg  { background: rgba(131,116,167,.16) !important; }
  .diag-txt { color:#8374a7 !important; font-weight:700; }

  /* Bords (2/5/10) en violet doux */
  .edge-bg  { background: rgba(131,116,167,.10) !important; }
  .edge-txt { color:#6d5c9e !important; font-weight:700; }
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel" data-presets="env,react">

const {useState,useEffect,useMemo,useRef} = React;
const BRAND="#8374a7";
const range=(a,b)=>Array.from({length:b-a+1},(_,i)=>a+i);

/* ------------ Composants communs ------------ */
function TopNav({route,go}){
  return (
    <div className="mb-6 rounded-3xl overflow-hidden shadow-sm border card">
      <div className="px-4 py-3 text-white flex items-center justify-between" style={{backgroundColor:BRAND}}>
        <div className="flex items-center gap-3">
          <img src="sacadoLogo.png" className="h-8 w-8 rounded-lg bg-white/90 p-1"/>
          <div><div className="font-black leading-tight">Sacado Acad√©mie</div><div className="text-xs opacity-90">Automatismes</div></div>
        </div>
        <img src="dogbot.png" className="h-8 w-8 rounded-full bg-white/90 p-0.5"/>
      </div>
      <div className="px-4 py-3 flex flex-wrap gap-2 bg-white/60">
        {[
          {k:"/",label:"Accueil"},
          {k:"/defi",label:"Jeu n¬∞1 ‚Äì D√©fi Tables"},
          {k:"/pythagore",label:"Jeu n¬∞2 ‚Äì Table de Pythagore"},
          {k:"/inverse",label:"Jeu n¬∞3 ‚Äì Retrouve la multiplication"},
        ].map(tab=>(
          <button key={tab.k} onClick={()=>go(tab.k)} className={"pill "+(route===tab.k?"active":"")}>{tab.label}</button>
        ))}
      </div>
    </div>
  );
}
function Hero(){
  return (
    <header className="hero p-6 md:p-10 text-center rounded-3xl card">
      <h1 className="text-3xl md:text-5xl font-extrabold text-[var(--brand)]">Sacado Acad√©mie - Atelier Automatismes</h1>
      <p className="mt-2 text-slate-700">Entra√Æne-toi sur les tables de multiplication avec DogBot üêæ</p>
      <img src="dogbot.png" className="mx-auto mt-4 h-28 w-28 rounded-full bg-white p-1 shadow"/>
    </header>
  );
}
function Hub(){
  return (
    <main className="max-w-5xl mx-auto px-4 py-8">
      <Hero/>
      <h2 className="text-center text-2xl md:text-3xl font-extrabold text-[var(--brand)] my-6">Choisis ton activit√©</h2>
      <div className="grid md:grid-cols-3 gap-6">
        <article className="card rounded-3xl p-6"><h3 className="text-xl font-extrabold text-[var(--brand)]">Jeu n¬∞1 ‚Äî D√©fi Tables</h3><a href="#/defi" className="inline-block mt-4 px-4 py-2 rounded-2xl btn">Commencer</a></article>
        <article className="card rounded-3xl p-6"><h3 className="text-xl font-extrabold text-[var(--brand)]">Jeu n¬∞2 ‚Äî Table de Pythagore</h3><a href="#/pythagore" className="inline-block mt-4 px-4 py-2 rounded-2xl btn">D√©couvrir</a></article>
        <article className="card rounded-3xl p-6"><h3 className="text-xl font-extrabold text-[var(--brand)]">Jeu n¬∞3 ‚Äî Retrouve la multiplication</h3><a href="#/inverse" className="inline-block mt-4 px-4 py-2 rounded-2xl btn">Jouer</a></article>
      </div>
    </main>
  );
}

/* ------------ Accessibilit√© ------------ */
function useAccessibility(){
  const [font,setFont]=useState("Arial");
  const [size,setSize]=useState(16);
  const [yellow,setYellow]=useState(false);
  const [black,setBlack]=useState(false);
  const [audio,setAudio]=useState(false);
  useEffect(()=>{document.body.style.fontSize=`${size}px`;},[size]);
  const rootBg=black?"#000":(yellow?"#fff7cc":"#f8fafc");
  const surface=black?"#111":(yellow?"#fff2a8":"#fff");
  const rootText=black?"#f8fafc":undefined;
  const cardStyle={backgroundColor:surface,color:rootText};
  const fontFamily=font==="Verdana"?"Verdana, Geneva, Tahoma, sans-serif":
    font==="OpenDyslexic"?"OpenDyslexicLocal, Arial, sans-serif":"Arial, Helvetica, sans-serif";
  const speak=(txt)=>{if(audio){let u=new SpeechSynthesisUtterance(txt);u.lang="fr-FR";speechSynthesis.cancel();speechSynthesis.speak(u);}};
  return {font,setFont,size,setSize,yellow,setYellow,black,setBlack,audio,setAudio,rootBg,cardStyle,rootText,fontFamily,speak};
}
function AccessibilityCard({acc}){
  return (
    <div className="card rounded-2xl p-4" style={acc.cardStyle}>
      <div className="font-bold mb-2">Accessibilit√©</div>
      <select value={acc.font} onChange={e=>acc.setFont(e.target.value)} className="border rounded p-1">
        <option>Arial</option><option>Verdana</option><option>OpenDyslexic</option>
      </select>
      <select value={acc.size} onChange={e=>acc.setSize(parseInt(e.target.value))} className="border rounded p-1 ml-2">
        {[16,18,20,22,24].map(s=><option key={s} value={s}>{s}px</option>)}
      </select>
      <label className="block"><input type="checkbox" checked={acc.yellow} onChange={e=>acc.setYellow(e.target.checked)}/> Fond jaune</label>
      <label className="block"><input type="checkbox" checked={acc.black} onChange={e=>acc.setBlack(e.target.checked)}/> √âcran noir</label>
      <label className="flex items-center gap-2 mt-2"><input type="checkbox" checked={acc.audio} onChange={e=>acc.setAudio(e.target.checked)}/>Audio (TTS)</label>
    </div>
  );
}

/* ------------ Jeu n¬∞1 (D√©fi Tables) ------------ */
// ... (inchang√©, garde ton code actuel pour GameDefi)

/* ------------ Jeu n¬∞2 (Table de Pythagore) ------------ */
function GamePythagore({acc}){
  const {rootBg,rootText,cardStyle,fontFamily,speak}=acc;
  const A=range(2,10),B=range(2,10);
  const [mode,setMode]=useState("random"),[count,setCount]=useState(10),[table,setTable]=useState(6);
  const key=(a,b)=>`${a}x${b}`,mirrorKey=(a,b)=>`${b}x${a}`;
  const blanks=useMemo(()=>{
    const set=new Set();
    if(mode==="random"){const all=[];for(const a of A)for(const b of B)all.push(key(a,b));while(set.size<Math.min(count,all.length))set.add(all[Math.floor(Math.random()*all.length)]);}
    else if(mode==="table"){B.forEach(b=>set.add(key(table,b)));}
    else if(mode==="diagonal"){A.forEach(a=>set.add(key(a,a)));}
    else if(mode==="borders"){[2,5,10].forEach(t=>{B.forEach(b=>set.add(key(t,b)));A.forEach(a=>set.add(key(a,t)));});}
    else if(mode==="mirror"){for(const a of A)for(const b of B)if(a<=b)set.add(key(a,b));}
    else if(mode==="minimal"){for(let a=6;a<=9;a++){for(let b=a+1;b<=9;b++){set.add(key(a,b));}}}
    return set;
  },[mode,count,table]);
  const [values,setValues]=useState({}),[checked,setChecked]=useState({});
  const getDisplayValue=(a,b)=>{const k=key(a,b),m=mirrorKey(a,b);return values[k]??(mode==="mirror"?values[m]:"")??"";};
  const isMirrorReadOnly=(a,b)=>mode==="mirror"&&a>b;
  const checkAll=()=>{const res={};for(const a of A)for(const b of B){const k=key(a,b);if(!(blanks.has(k)||(mode==="mirror"&&a>b&&blanks.has(mirrorKey(a,b)))))continue;const good=a*b;const v=(values[k]??(mode==="mirror"?values[mirrorKey(a,b)]:""));res[k]=v!==""&&Number(v)===good?"ok":"ko";}setChecked(res);};
  const helpText=mode==="mirror"?"Astuce : gr√¢ce √† la commutativit√© (a√ób=b√óa), conna√Ætre la moiti√© de la table suffit.":"";
  if(mode==="minimal"){helpText="Si tu connais les tables jusqu‚Äô√† 5 et les doubles (diagonale violette), il ne reste que 6 r√©sultats √† apprendre : 6√ó7,6√ó8,6√ó9,7√ó8,7√ó9,8√ó9.";}
  return (
    <div className="min-h-screen p-6" style={{backgroundColor:rootBg,color:rootText,fontFamily}}>
      <TopNav route="/pythagore" go={(k)=>location.hash="#"+k}/>
      <div className="max-w-6xl mx-auto">
        <div className="grid xl:grid-cols-3 gap-4 mb-6"><AccessibilityCard acc={acc}/>
          <div className="card p-4" style={cardStyle}>
            <div className="font-bold mb-2">Mode</div>
            <label><input type="radio" checked={mode==="random"} onChange={()=>setMode("random")}/> Al√©atoires</label>
            <label><input type="radio" checked={mode==="table"} onChange={()=>setMode("table")}/> Table par table</label>
            <label><input type="radio" checked={mode==="diagonal"} onChange={()=>setMode("diagonal")}/> Diagonale des doubles</label>
            <label><input type="radio" checked={mode==="borders"} onChange={()=>setMode("borders")}/> Bords (2,5,10)</label>
            <label><input type="radio" checked={mode==="mirror"} onChange={()=>setMode("mirror")}/> Miroir de la diagonale</label>
            <label><input type="radio" checked={mode==="minimal"} onChange={()=>setMode("minimal")}/> Reste √† apprendre (6‚Äì9)</label>
          </div>
          <div className="card p-4" style={cardStyle}><button onClick={checkAll} className="px-4 py-2 rounded-2xl text-white" style={{backgroundColor:BRAND}}>Corriger</button></div>
        </div>
        <div className="overflow-auto">
          <table className="min-w-[900px] border-collapse">
            <thead><tr><th className="p-2 hdr">√ó</th>{B.map(b=><th key={b} className="p-2 hdr">{b}</th>)}</tr></thead>
            <tbody>
              {A.map(a=><tr key={a}><th className="p-2 hdr">{a}</th>
                {B.map(b=>{
                  const k=key(a,b),onDiag=a===b,isEdge=(mode==="borders"&&(a===2||a===5||a===10||b===2||b===5||b===10));
                  if((mode==="mirror"||mode==="minimal")&&onDiag){return <td key={k} className={"p-1 text-center diag-bg"}><span className="diag-txt">{a*b}</span></td>;}
                  if(mode==="mirror"&&a>b){return <td key={k} className={"p-1 text-center diag-bg"}><input readOnly value={getDisplayValue(a,b)} className="diag-txt"/></td>;}
                  return <td key={k} className={"p-1 text-center "+(isEdge?"edge-bg":"")}>{blanks.has(k)?<input value={getDisplayValue(a,b)} onChange={e=>setValues(v=>({...v,[k]:e.target.value}))} className={"border rounded w-[70px] text-center "+(isEdge?"edge-txt":"")}/>:<span className={(onDiag?"diag-txt ":"")+(isEdge?"edge-txt":"")}>{a*b}</span>}</td>;
                })}
              </tr>)}
            </tbody>
          </table>
        </div>
        {helpText && <div className="mt-4 card p-4" style={cardStyle}><strong>Astuce :</strong> {helpText}</div>}
      </div>
    </div>
  );
}

/* ------------ Jeu n¬∞3 (Retrouve la multiplication) ------------ */
// ... (inchang√©, garde ton code actuel pour GameInverse)

function App(){
  const [route,setRoute]=useState(location.hash.replace(/^#/,"")||"/");
  const acc=useAccessibility();
  useEffect(()=>{window.addEventListener("hashchange",()=>setRoute(location.hash.replace(/^#/,"")||"/"));},[]);
  if(route==="/defi") return <GameDefi acc={acc}/>;
  if(route==="/pythagore") return <GamePythagore acc={acc}/>;
  if(route==="/inverse") return <GameInverse acc={acc}/>;
  return <div className="min-h-screen p-6"><TopNav route="/" go={k=>location.hash="#"+k}/><Hub/></div>;
}
ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
