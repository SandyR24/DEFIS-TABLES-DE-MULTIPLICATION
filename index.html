<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta http-equiv="Cache-Control" content="no-store"/>
<title>Sacado Académie — Atelier d’automatismes</title>

<!-- React, ReactDOM, Babel, Tailwind -->
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>

<style>
  :root{ --brand:#8374a7; }
  body{ margin:0; background:#f8fafc; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
  .hero{ background:#efe7ff; }
  .card{ background:#fff; border:1px solid #e5e7eb; }
  .btn{ background:var(--brand); color:#fff; }
  .pill{ padding:.45rem .8rem; border:1px solid #e5e7eb; border-radius:999px; background:#fff; cursor:pointer; color:#111827; }
  .pill.active{ background:var(--brand); border-color:var(--brand); color:#fff; }
  .hdr{ background:#f1f5f9; }
  .ok{ background:#dcfce7; } .ko{ background:#fee2e2; }
  .ko-input{ color:#be185d !important; font-weight:700; }

  .diag-bg  { background: rgba(131,116,167,.16) !important; }
  .diag-txt { color:#8374a7 !important; font-weight:700; }
  .fill-hint { background: rgba(131,116,167,.12) !important; }
  .violet-border { border-color:#8374a7 !important; box-shadow:0 0 0 2px rgba(131,116,167,.25) inset; }

  .pair-card{ background: rgba(131,116,167,.10); border:1px solid #8374a7; border-radius:16px; padding:14px 16px; }

  .progress-wrap{ height:10px; background:#e5e7eb; border-radius:9999px; overflow:hidden; }
  .progress-bar{ height:100%; background:#8374a7; transition:width .25s linear; }
  .flash { animation: flash-red 600ms ease-in-out; }
  @keyframes flash-red { 0%{box-shadow:0 0 0 0 rgba(220,38,38,0);} 30%{box-shadow:0 0 0 6px rgba(220,38,38,.45);} 100%{box-shadow:0 0 0 0 rgba(220,38,38,0);} }

  /* ---- DARK MODE -------------------------------------------------------- */
  .dark-mode, .dark-mode * { color:#f8fafc !important; }
  .dark-mode .card{ background:#111111 !important; border-color:#334155 !important; }
  .dark-mode .hdr{ background:#1f2937 !important; }
  .dark-mode input, .dark-mode select{ background:#000 !important; color:#f8fafc !important; border-color:#64748b !important; }
  .dark-mode .pill{ background:#fff !important; color:#111827 !important; border-color:#e5e7eb !important; }
  .dark-mode .pill.active{ background:#a69acc !important; border-color:#a69acc !important; color:#111827 !important; }
  .dark-mode .progress-wrap{ background:#0b0b0b !important; }
  .dark-mode .progress-bar{ background:#a69acc !important; }

  /* Sélecteurs lisibles en sombre */
  .dark-mode select,
  .dark-mode option,
  .dark-mode optgroup {
    background: #0b0b0b !important;
    color: #f8fafc !important;
    border-color: #64748b !important;
  }
  .dark-mode select:focus {
    border-color: #a69acc !important;
    box-shadow: 0 0 0 2px rgba(166,154,204,.35) inset;
  }
  .dark-mode option:checked {
    background: #3f3f46 !important;
    color: #f8fafc !important;
  }

  /* Checkboxes lisibles en sombre */
  .dark-mode input[type="checkbox"]{
    accent-color: #a69acc;
  }
  /* Pour colorer le label quand coché (on cible le <span> après l'input) */
  label > input[type="checkbox"]:checked + span {
    color: #8374a7;
    font-weight: 700;
  }
  .dark-mode label > input[type="checkbox"]:checked + span {
    color: #a69acc;
    font-weight: 700;
  }

  /* Indices plus visibles en sombre */
  .dark-mode .fill-hint{ background: rgba(166,154,204,.22) !important; }

  @font-face{
    font-family:'OpenDyslexicLocal';
    src:url('OpenDyslexic-Regular.otf') format('opentype'),
        url('OpenDyslexicAlta-Regular.otf') format('opentype');
    font-display:swap;
  }
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel" data-presets="env,react">
const {useState,useEffect,useRef} = React;
const BRAND = "#8374a7";
const range=(a,b)=>Array.from({length:b-a+1},(_,i)=>a+i);

/* NAV / HUB */
function TopNav({route,go}){
  return (
    <div className="mb-6 rounded-3xl overflow-hidden shadow-sm border card">
      <div className="px-4 py-3 text-white flex items-center justify-between" style={{backgroundColor:BRAND}}>
        <div className="flex items-center gap-3">
          <img src="sacadoLogo.png" className="h-8 w-8 rounded-lg bg-white/90 p-1" alt="SACADO"/>
          <div>
            <div className="font-black leading-tight">Sacado Académie</div>
            <div className="text-xs opacity-90">Atelier d’automatismes</div>
          </div>
        </div>
        <img src="dogbot.png" className="h-8 w-8 rounded-full bg-white/90 p-0.5" alt="DogBot"/>
      </div>
      <div className="px-4 py-3 flex flex-wrap gap-2 bg-white/60">
        {[
          {k:"/", label:"Accueil"},
          {k:"/defi", label:"Jeu n°1 – Défi Tables"},
          {k:"/pythagore", label:"Jeu n°2 – Table de Pythagore"},
          {k:"/inverse", label:"Jeu n°3 – Retrouve la multiplication"},
        ].map(tab=>(
          <button key={tab.k} onClick={()=>go(tab.k)} className={"pill "+(route===tab.k?"active":"")}>{tab.label}</button>
        ))}
      </div>
    </div>
  );
}
function Hero(){
  return (
    <header className="hero p-6 md:p-10 text-center rounded-3xl card">
      <h1 className="text-3xl md:text-5xl font-extrabold text-[var(--brand)]">Sacado Académie</h1>
      <p className="mt-1 text
